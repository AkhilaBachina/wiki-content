<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from sugar.fp.nsn-rdnet.net/wiki/index.php?title=Creating_FlexiTAF_release_tags&printable=yes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 23 Aug 2024 05:47:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Creating FlexiTAF release tags - SugarWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.1" />
<meta name="robots" content="noindex,follow" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="indexf3be.html?title=Creating_FlexiTAF_release_tags&amp;action=edit" />
<link rel="edit" title="Edit" href="indexf3be.html?title=Creating_FlexiTAF_release_tags&amp;action=edit" />
<link rel="shortcut icon" href="http://sugar.fp.nsn-rdnet.net/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.html" title="SugarWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="api251f.html?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="SugarWiki Atom feed" href="index890f.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="load618b.html?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;printable=1&amp;skin=monobook&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="load711e.html?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;printable=1&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:7a3748d34e6456ae8d0f053363f745f7 */</style>

<script src="loadaa7b.html?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Creating_FlexiTAF_release_tags","wgTitle":"Creating FlexiTAF release tags","wgCurRevisionId":2676,"wgArticleId":1745,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Creating_FlexiTAF_release_tags","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: wikidb:resourceloader:filter:minify-js:7:a02a7fa766593347c4dbb130a7c3803e */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Creating_FlexiTAF_release_tags skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Creating FlexiTAF release tags</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From SugarWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>To create FlexiTAF release, tags need to be created first to FlexiTAF Build, then to all other sub modules, and finally for the whole product.
</p><p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#About_version_tags"><span class="tocnumber">1</span> <span class="toctext">About version tags</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Creating_a_release_tag_for_FlexiTAF_Build"><span class="tocnumber">2</span> <span class="toctext">Creating a release tag for FlexiTAF Build</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Installing_the_tagged_version"><span class="tocnumber">2.1</span> <span class="toctext">Installing the tagged version</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Creating_tags_for_other_modules"><span class="tocnumber">3</span> <span class="toctext">Creating tags for other modules</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Creating_a_release_of_FlexiTAF"><span class="tocnumber">4</span> <span class="toctext">Creating a release of FlexiTAF</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Deploying_the_release"><span class="tocnumber">5</span> <span class="toctext">Deploying the release</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="About_version_tags"> About version tags </span></h2>
<p>FlexiTAF project consists of multiple modules that have separate version numbers that depend on versions of other modules. Here are some points to make working with different version easier:
</p>
<ul><li> Versions of FlexiTAF modules have <i>&lt;major&gt;</i>.<i>&lt;minor&gt;</i>.<i>&lt;build&gt;</i> structure (e.g. 1.0.1). Version tags for development versions of the components end with "-SNAPSHOT" (e.g. 1.0.1-SNAPSHOT)
</li></ul>
<ul><li> Each module defines versions for three different purposes: The version of the module, version of the parent, and versions of the dependencies.
</li></ul>
<ul><li> Versions of external (non-FlexiTAF) dependencies are located in the pom file of Build module. Other components must not define versions for external dependencies. These versions cannot be SNAPSHOT versions.
</li></ul>
<ul><li> A module under development uses SNAPSHOT version label for itself. When the module is released the released label is usually the development version without the SNAPSHOT and the next development label is the SNAPSHOT version incremented by 1. Sometimes other digits of the versions number may also be incremented.
</li></ul>
<ul><li> Version label for a module can be omitted. This is especially true for nested modules. In this case the version of the parent is used and the sub modules have to be always released at the same time with the parent.
</li></ul>
<ul><li> The version of the parent module and the versions of the internal module dependencies are listed separately in each module. Whenever possible, these should be released (non-SNAPSHOT) versions of other modules. If the development work is going on in multiple modules these versions have to be SNAPSHOT versions pointing to the other modules under development. However, it is not possible to create releases if there are SNAPSHOT parents or dependencies in any modules.
</li></ul>
<ul><li> Modules should not use relativePath to define module locations. Let Maven retrieve the correct versions of the dependencies. Exception to this rule are closely coupled sub-modules that inherit the version from the parent (e.g tcexec and tcexec/tcexec-core)
</li></ul>
<p><br />
</p>
<h2> <span class="mw-headline" id="Creating_a_release_tag_for_FlexiTAF_Build"> Creating a release tag for FlexiTAF Build </span></h2>
<ul><li> Dependencies to SNAPSHOT version of the Build module in all sub-modules have to be converted to point to the non-SNAPSHOT release label of the Build component before proceeding. 
</li></ul>
<pre> cd .../FlexiAF/trunk/Build/trunk
 mvn -N -Prelease-debug release:prepare
 &gt; What is the release version for "FlexiAF Build"? (com.nokia.flexi.flexiaf:Build) 1.1.0:&#160;: <b>&lt;ret&gt;</b>
 &gt; What is SCM release tag or label for "FlexiAF Build"? (com.nokia.flexi.flexiaf:Build) Build-1.1.0:&#160;: <b>1.1.0 &lt;ret&gt;</b>
 &gt; What is the new development version for "FlexiAF Build"? (com.nokia.flexi.flexiaf:Build) 1.1.1-SNAPSHOT:&#160;: <b>&lt;ret&gt;</b>
 mvn -N release:clean
</pre>
<ul><li> <i>-N</i> forces maven to operate in non-recursive mode. Tags for sub-components are not created.
</li><li> <i>-Prelease-debug</i> Specifies the compilation profile. Profiles are defined in Build pom. 
</li><li> <i>-DpreparationGoals="validate"</i> is set by default because <i>install</i> preparation goal would try to install all sub modules that is not possible at this stage. Therefore the tagged version of the module needs to be installed manually after the tag is created
</li><li> <i>release:prepare</i> is the goal for creating new tags to the SCM.
</li><li> <i>release:clean</i> cleans temporay files created during release. This step has to be performed before new release can be made.
</li></ul>
<p><br />
</p>
<h3> <span class="mw-headline" id="Installing_the_tagged_version"> Installing the tagged version </span></h3>
<p>The tag is automatically installed to the local repository during release:prepare phase if <i>preparationGoals</i> contains <i>install</i> goal. This is done by default with other components but not with Build. If installation is skipped the tagged version needs to be installed manually before further tags can be created.
</p>
<pre> cd .../FlexiAF/trunk/Build/
 svn update
 cd .../FlexiAF/trunk/Build/tags/<i>&lt;new tag&gt;</i>
 mvn -N install
</pre>
<p><br />
</p>
<h2> <span class="mw-headline" id="Creating_tags_for_other_modules"> Creating tags for other modules </span></h2>
<p>Tags for other modules cannot be created unless there is a released and installed tag for the Build module.
</p><p>Tag for each sub-module has to be created manually. This must be done in the build order that can be seen by issuing command "mvn validate" in the Build directory. If the tags are not created in build order the pom files cannot be validated.
</p>
<ul><li> First make sure that parent link in the pom file points to the correct released version of Build module (not to a SNAPSHOT version) and correct released version number (not SNAPSHOT) is listed for each dependency.
</li></ul>
<pre> cd .../FlexiAF/trunk/<i>&lt;component&gt;</i>/trunk
 vi pom.xml
 mvn -Prelease-debug release:prepare
 &gt; What is the release version for "FlexiAF Util"? (com.nokia.flexi.flexiaf:Util) 1.0.4:&#160;:
 &gt; What is SCM release tag or label for "FlexiAF Util"? (com.nokia.flexi.flexiaf:Util) Util-1.0.4:&#160;: <b>1.0.4</b>
 &gt; What is the new development version for "FlexiAF Util"? (com.nokia.flexi.flexiaf:Util) 1.0.5-SNAPSHOT:&#160;:
 mvn release:clean
</pre>
<p><br />
</p>
<h2> <span class="mw-headline" id="Creating_a_release_of_FlexiTAF"> Creating a release of FlexiTAF </span></h2>
<p>NOTE: This phase does not automatically commit changes to the repository. If anything goes wrong the tag directory can be deleted from the local working copy with <i>svn rm --force &lt;new tag&gt;</i> and the tag can be created again after the problem is corrected.
</p><p>A FlexiTAF release consists of selected versions of FlexiTAF modules. New release tag is created with an Ant script in the local view and it must be checked in manually. 
</p>
<ul><li> FlexiTAF release version tag and the versions of the modules are specified in file .../FlexiAF/trunk/modules.xml.
</li></ul>
<ul><li> Create FlexiTAF tag with the commands below. The versions listed for each module have to be released (mvn release:prepare). The module versions must not be SNAPSHOT versions.
</li></ul>
<pre> cd .../FlexiAF/trunk
 svn update
 vi modules.xml
 ant -f Build/trunk/src/main/ant/release.ant.xml
</pre>
<ul><li> Try compiling the FlexiTAF release
</li></ul>
<pre> cd .../FlexiAF/tags/<i>&lt;new tag&gt;</i>/Build/trunk
 mvn -Prelease-debug test
 mvn clean
</pre>
<ul><li> Finally the release can be committed to the svn repository
</li></ul>
<pre> cd .../FlexiAF/tags/
 svn commit -m "Created FlexiTAF release <i>&lt;new tag&gt;</i>"
</pre>
<p><br />
</p>
<h2> <span class="mw-headline" id="Deploying_the_release"> Deploying the release </span></h2>
<p>Finally the release must be deployed to the default repository in flexiaf4. This way it will be available for other users also.
</p>
<ul><li> Deployment is performed with command
</li></ul>
<pre> cd .../FlexiAF/tags/<i>&lt;tag&gt;</i>/Build/trunk
 mvn deploy -Prelease-debug
</pre>
<ul><li> The name of the repository is <i>flexiaf.internal.repository</i> (defined in Build pom)
</li><li> Username to access the repository is <i>maven</i> (defined in global settings.xml)
<ul><li> In order to be able to log in to the repository server <i>flexiaf4</i> as <i>maven</i> you need to install ssh public key there
<ul><li> Generate DSA key pair with ssh-keygen command in flexiaf5 with your account. Then append your .ssh/id_dsa.pub to /localhome/maven/.ssh/authorized_keys in flexiaf4. See for example <a rel="nofollow" class="external autonumber" href="http://www.sshkeychain.org/mirrors/SSH-with-Keys-HOWTO/SSH-with-Keys-HOWTO-4.html">[1]</a> (Protocol version 2) for details.
</li><li> Login with a password is not possible. If maven asks for password the ssh keys are not configured properly.
</li></ul>
</li></ul>
</li></ul>

<!-- 
NewPP limit report
Preprocessor visited node count: 23/1000000
Preprocessor generated node count: 28/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1745-0!*!*!!en!*!* and timestamp 20240823050500 -->
</div><div class="printfooter">
Retrieved from "<a href="index9939.html?title=Creating_FlexiTAF_release_tags&amp;oldid=2676">http://sugar.fp.nsn-rdnet.net/wiki/index.php?title=Creating_FlexiTAF_release_tags&amp;oldid=2676</a>"</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php/Creating_FlexiTAF_release_tags.html" primary="1" context="subject" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="index3838.html?title=Talk:Creating_FlexiTAF_release_tags&amp;action=edit&amp;redlink=1" primary="1" context="talk" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="indexf3be.html?title=Creating_FlexiTAF_release_tags&amp;action=edit" primary="1" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="indexc5cb.html?title=Creating_FlexiTAF_release_tags&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="index.php/User_10.143.81.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.143.81.182</a></li>
				<li id="pt-anontalk"><a href="index.php/User_talk_10.143.81.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
				<li id="pt-createaccount"><a href="index5cbb.html?title=Special:UserLogin&amp;returnto=Creating+FlexiTAF+release+tags&amp;returntoquery=printable%3Dyes&amp;type=signup">Create account</a></li>
				<li id="pt-anonlogin"><a href="indexc783.html?title=Special:UserLogin&amp;returnto=Creating+FlexiTAF+release+tags&amp;returntoquery=printable%3Dyes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="index.php/Main_Page.html" style="background-image: url(skins/common/images/wiki.png);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="index.php/Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="index.php/SugarWiki_Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="index.php/SugarWiki_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="index.php/Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="index.php/POC_(Chengdu).html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="index.php/Help_Contents.html" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="http://sugar.fp.nsn-rdnet.net/wiki/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" title="Search SugarWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Toolbox</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="index.php/Special_WhatLinksHere/Creating_FlexiTAF_release_tags.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="index.php/Special_RecentChangesLinked/Creating_FlexiTAF_release_tags.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="index.php/Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-permalink"><a href="index9939.html?title=Creating_FlexiTAF_release_tags&amp;oldid=2676" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="index5eb9.html?title=Creating_FlexiTAF_release_tags&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 2 April 2007, at 16:15.</li>
		<li id="viewcount">This page has been accessed 44 times.</li>
		<li id="privacy"><a href="index.php/SugarWiki_Privacy_policy.html" title="SugarWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="index.php/SugarWiki_About.html" title="SugarWiki:About">About SugarWiki</a></li>
		<li id="disclaimer"><a href="index.php/SugarWiki_General_disclaimer.html" title="SugarWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi"], null, true);
}</script>
<script src="load17b7.html?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;printable=1&amp;skin=monobook&amp;*"></script>
<!-- Served in 0.214 secs. --></body>
<!-- Mirrored from sugar.fp.nsn-rdnet.net/wiki/index.php?title=Creating_FlexiTAF_release_tags&printable=yes by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 23 Aug 2024 05:47:57 GMT -->
</html>