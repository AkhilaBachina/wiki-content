<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">

<!-- Mirrored from sugar.fp.nsn-rdnet.net/wiki/index.php/Nokia_blades_VE_Installation_guide by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 23 Aug 2024 05:05:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Nokia blades VE Installation guide - SugarWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.1" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="../index24ed.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit" />
<link rel="edit" title="Edit" href="../index24ed.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit" />
<link rel="shortcut icon" href="http://sugar.fp.nsn-rdnet.net/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.html" title="SugarWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="../api251f.html?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="SugarWiki Atom feed" href="../index890f.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../load5c1d.html?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="../load484a.html?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikidb:resourceloader:filter:minify-css:7:7a3748d34e6456ae8d0f053363f745f7 */</style>

<script src="../load9316.html?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Nokia_blades_VE_Installation_guide","wgTitle":"Nokia blades VE Installation guide","wgCurRevisionId":7340,"wgArticleId":1957,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Nokia_blades_VE_Installation_guide","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: wikidb:resourceloader:filter:minify-js:7:a02a7fa766593347c4dbb130a7c3803e */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Nokia_blades_VE_Installation_guide skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Nokia blades VE Installation guide</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From SugarWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Nokia_Blade_VE_Installation"><span class="tocnumber">1</span> <span class="toctext">Nokia Blade VE Installation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installing_RHEL"><span class="tocnumber">2</span> <span class="toctext">Installing RHEL</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Configuring_the_Network"><span class="tocnumber">3</span> <span class="toctext">Configuring the Network</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Install_the_VMWare_Server"><span class="tocnumber">4</span> <span class="toctext">Install the VMWare Server</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Installing_the_FEWS_on_the_host_machine"><span class="tocnumber">5</span> <span class="toctext">Installing the FEWS on the host machine</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Creating_the_Virtual_nodes"><span class="tocnumber">6</span> <span class="toctext">Creating the Virtual nodes</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#For_Commissioning"><span class="tocnumber">7</span> <span class="toctext">For Commissioning</span></a></li>
</ul>
</td></tr></table>
<h2><span class="editsection">[<a href="../indexc8ac.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=1" title="Edit section: Nokia Blade VE Installation">edit</a>]</span> <span class="mw-headline" id="Nokia_Blade_VE_Installation"> Nokia Blade VE Installation </span></h2>
<p>The following steps needs to be followed to install a VE on Nokia blades
</p>
<ol><li> Get the Hardware reservation done. You could contact Heikki Kopomaa or Aldarawsheh Musa to get a Free Nokia blade Chassis or a Blade
</li><li> Hardware configurations should be done. This includes  
</li></ol>
<pre> 1. Get the Nokia blades with minimum 4 GB RAM and each blade needs a dedicated Nokia blade hard disk 
 2. The switch should be connected to the Lab Network
 3. Contact Juha Kari / Aalto Sami for more information and help.
</pre>
<h2><span class="editsection">[<a href="../indexc8ec.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=2" title="Edit section: Installing RHEL">edit</a>]</span> <span class="mw-headline" id="Installing_RHEL"> Installing RHEL </span></h2>
<p>1. Put the NB + the HardDisk to the two free slots in the machines in the London Network. Machines in london network could be stitch 1/8, stitch2/8
</p><p>The free slots can be found from <br />
</p>
<pre> <a rel="nofollow" class="external free" href="http://london.fp.nsn-rdnet.net/LondontestNetwork/stitch/stitch_slot_assignment.html">http://london.fp.nsn-rdnet.net/LondontestNetwork/stitch/stitch_slot_assignment.html</a><br />
</pre>
<p>The unallocated or unreserved slots can be taken. Currently we have slots 5 and 6 in Stitch 1/8<br />
</p><p>2. Boot the NB<br />
3. Press F2 at the prompt,<i>Press &lt;F2&gt; to enter SETUP,  &lt;F12&gt; Network</i> to go to BIOS settings<br />
4. Select <i>Boot</i> menu --&gt; select <i>OS Load Timeout</i> and make the value as <i>Disabled</i><br />
5. Save the settings and exit<br />
6. Then when the node boots again press F12 at the prompt <i>Press &lt;F2&gt; to enter SETUP,  &lt;F12&gt; Network</i> to boot the node from Network. It will do a DHCP boot from London<br />
7. Once we get the London boot select "Using a serial console at 115200 bps" option<br />
8. In the next Menu there is a kick start installer saved. You need to select option <i>RHEL 4.6 AS i386 for Arun Jacob</i>.	This is a saved image for RHEL4.6. The Redhat will be installed and the process takes around 10 minutes. <br />
9. After the RHEL installation put back the NB and the Disk back to its original slot and boot the blade.<br />
10. The default password for root is redhat which could be changed later using the command passwd
</p>
<h2><span class="editsection">[<a href="../index94fe-2.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=3" title="Edit section: Configuring the Network">edit</a>]</span> <span class="mw-headline" id="Configuring_the_Network">Configuring the Network</span></h2>
<p>1. Get the allocated ip address range information from the Lab Support team<br />
2. To add the ip address edit the file /etc/sysconfig/network-scripts/ifcfg-eth0 and have the values as in the sample below but with the assigned ip address
</p>
<pre> $ cat /etc/sysconfig/network-scripts/ifcfg-eth0
 DEVICE=eth0
 BOOTPROTO=static
 HWADDR=00:0E:0C:52:D1:2C
 ONBOOT=yes
 TYPE=Ethernet
 IPADDR=10.102.17.110
 NETWORK=10.102.17.0
 NETMASK=255.255.255.0
</pre>
<p>3. To add the Nameserver address modify the file /etc/resolv.conf as
</p>
<pre> $ cat /etc/resolv.conf
 search fp.nsn-rdnet.net
 nameserver 10.102.12.68
 nameserver 10.102.12.69
</pre>
<p>4. To add the GATEWAY  and change the Hostname address modify the file
</p>
<pre> $ cat /etc/sysconfig/network
 NETWORKING=yes
 HOSTNAME=VNB15
 GATEWAY=10.102.17.1
</pre>
<p>5. If the hostname is changed then reboot the machine using <i>reboot -f</i> or if only the network settings are changed the following steps should be enough
</p>
<pre> ifdown eth0
 ifup eth0
</pre>
<h2><span class="editsection">[<a href="../indexddf1.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=4" title="Edit section: Install the VMWare Server">edit</a>]</span> <span class="mw-headline" id="Install_the_VMWare_Server">Install the VMWare Server</span></h2>
<p>1. Get the VMWare server rpm from <a rel="nofollow" class="external free" href="http://www.vmware.com/download/server/">http://www.vmware.com/download/server/</a> website.<br />
2. Register to get the License key numbers. <br />The rpm version of VMWare used is VMware-server-1.0.7-108231.i386.rpm<br />
3. Install the VMWare rpm
</p>
<pre> $ rpm -Uvh VMware-server-1.0.7-108231.i386.rpm
</pre>
<p>4. Execute the vmware-config.pl script
</p>
<pre> $ vmware-config.pl (Output and the options used are displayed below)
 
 &lt;License Agreement is Displayed&gt;
 
 Do you accept? (yes/no) yes
 
 Thank you.
 
 Configuring fallback GTK+ 2.4 libraries.
 
 In which directory do you want to install the mime type icons?
 [/usr/share/icons]
 
 What directory contains your desktop menu entry files? These files have a
 .desktop file extension. [/usr/share/applications]
 
 In which directory do you want to install the application's icon?
 [/usr/share/pixmaps]
 
 Trying to find a suitable vmmon module for your running kernel.
 
 The module bld-2.6.9-11.EL-i686smp-RHEL4 loads perfectly in the running kernel.
 
 
 Do you want networking for your virtual machines? (yes/no/help) [yes]
 
 Configuring a bridged network for vmnet0.
 
 Your computer has multiple ethernet network interfaces available: eth0, eth1.
 Which one do you want to bridge to vmnet0? [eth0]
 
 The following bridged networks have been defined:
 
 . vmnet0 is bridged to eth0
 
 Do you wish to configure another bridged network? (yes/no) [no]
 
 Do you want to be able to use NAT networking in your virtual machines? (yes/no)
 [yes] no
 
 Do you want to be able to use host-only networking in your virtual machines?
 [no] yes
 
 Configuring a host-only network for vmnet1.
 
 Do you want this program to probe for an unused private subnet? (yes/no/help)
 [yes]
 
 Probing for an unused private subnet (this can take some time)...
 
 The subnet 192.168.101.0/255.255.255.0 appears to be unused.
 
 This system appears to have a DHCP server configured for normal use.  Beware
 that you should teach it how not to interfere with VMware Server's DHCP server.
 There are two ways to do this:
 
 1) Modify the file /etc/dhcpd.conf to add something like:
 
 subnet 192.168.101.0 netmask 255.255.255.0 {
 # Note: No range is given, vmnet-dhcpd will deal with this subnet.
 }
 
 2) Start your DHCP server with an explicit list of network interfaces to deal
 with (leaving out vmnet1). e.g.:
 
 dhcpd eth0
 
 Consult the dhcpd(8) and dhcpd.conf(5) manual pages for details.
 
 Hit enter to continue.
 
 The following host-only networks have been defined:
 
 . vmnet1 is a host-only network on private subnet 192.168.101.0.
 
 Do you wish to configure another host-only network? (yes/no) [no]
 
 Trying to find a suitable vmnet module for your running kernel.
 
 The module bld-2.6.9-11.EL-i686smp-RHEL4 loads perfectly in the running kernel.
 
 
 Please specify a port for remote console connections to use [902]
 
 Stopping xinetd:                                           [  OK  ]
 Starting xinetd:                                           [  OK  ]
 Configuring the VMware VmPerl Scripting API.
 
 Building the VMware VmPerl Scripting API.
 
 Using compiler "/usr/bin/gcc". Use environment variable CC to override.
 
 Installing the VMware VmPerl Scripting API.
 
 The installation of the VMware VmPerl Scripting API succeeded.
 
 Generating SSL Server Certificate
 
 In which directory do you want to keep your virtual machine files?
 [/var/lib/vmware/Virtual Machines]
 
 The path "/var/lib/vmware/Virtual Machines" does not exist currently. This
 program is going to create it, including needed parent directories. Is this
 what you want? [yes]
 
 Please enter your 20-character serial number.
 
 Type XXXXX-XXXXX-XXXXX-XXXXX or 'Enter' to cancel:  92N0E-YPLA2-2GJG7-49PAM
 
 Starting VMware services:
 Virtual machine monitor                                 [  OK  ]
 Virtual ethernet                                        [  OK  ]
 Bridged networking on /dev/vmnet0                       [  OK  ]
 Host-only networking on /dev/vmnet1 (background)        [  OK  ]
 
 The configuration of VMware Server 1.0.7 build-108231 for Linux for this
 running kernel completed successfully.
 
 [root@VNB15 ~]
</pre>
<h2><span class="editsection">[<a href="../indexec21.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=5" title="Edit section: Installing the FEWS on the host machine">edit</a>]</span> <span class="mw-headline" id="Installing_the_FEWS_on_the_host_machine">Installing the FEWS on the host machine</span></h2>
<p>1. Get the SS_FEWS rpm  from the build that is to be commissioned
e.g, for build R_FSPR5CAT_1.10.WR.32.0809221900.2076_GenericWRx86.iso,
Do the following
</p>
<pre> $ rpm2cpio /workflexman/CI/rpm/R_FSPR5CAT_1.10.WR.32.0809221900.2076_GenericWRx86-base-1.rpm | cpio -   ivd "*SS_FEWS*"
   
 $ scp the SS_FEWS rpm to the host machine
</pre>
<p>2. Install the SS_FEWS rpm
</p>
<pre> $ rpm -Uvh SS_FEWS-1.14-R_FSPR5CAT_1.10.WR.i386.rpm
</pre>
<p>3. export the fsetupcli path to the PATH variable so that the command could be accessed from any location in host
</p>
<pre> $ export PATH=$PATH:/opt/nokiasiemens/SS_FEWS/bin/
</pre>
<p>Also add the same line to .bashrc file of the host so that all new shells will have the PATH set
</p><p><br />
</p>
<h2><span class="editsection">[<a href="../index1d82.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=6" title="Edit section: Creating the Virtual nodes">edit</a>]</span> <span class="mw-headline" id="Creating_the_Virtual_nodes">Creating the Virtual nodes</span></h2>
<p><b>For MULTINODE</b>
</p><p>1. Run the script create_cluster_vms.sh 
The script can be obtained from root directory of the existing VMWare hosts (root@10.20.100.160 / redhat, 10.102.228.130 / hprm33)or after installing the SS_FEWS rpm the script can be obtained from file /opt/nokiasiemens/SS_FEWS/doc/QUICKGUIDE_VMware.txt. The script is present at the end of the file.
</p>
<pre> $ sh create_cluster_vms.sh /var/lib/vmware/Virtual\ Machines/CAT1 01:02
</pre>
<p>2. Open the vmware GUI and open the virtual nodes by using the option "Open a Virtual machine" -&gt; Browse -&gt; Go to the directory where the vmware nodes are created,  for e.g. /var/lib/vmware/Virtual\ Machines/CAT1 and select the CLA-0/CLA-0.vmx -&gt; and open.
</p>
<pre> $ vmware &amp;
</pre>
<h2><span class="editsection">[<a href="../indexdb84.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit&amp;section=7" title="Edit section: For Commissioning">edit</a>]</span> <span class="mw-headline" id="For_Commissioning">For Commissioning</span></h2>
<p><b>Detailed steps can be found in the Quick guides for VMWare commissioning.</b>
</p><p>1. scp the iso image that is needed to be commissioned from the /workflexman/CI directory
Information on the latest builds can be got from the below link
</p>
<pre> <a rel="nofollow" class="external free" href="http://halti.ntc.nokia.com/FlexiServer_SCM/Flexi_platform/ci-index_CAT.php">http://halti.ntc.nokia.com/FlexiServer_SCM/Flexi_platform/ci-index_CAT.php</a>
</pre>
<p>2. Patch the delivery
</p>
<pre> $ fsetupcli --delivery --patch &lt;build *.iso&gt;
</pre>
<p>3. Create the fsetup.conf file
A sample file is provided below.
</p>
<pre> set -a
 PASSWORD_root='$1$5sW2M7pN$ltl/SKtUMWGJmv3m4R8171' # commissioning <br />
 PASSWORD__nokfsoperator='$1$u9PxqYI0$zT3vf2i0f.xvA9Z04ik4t0' # commissioning <br />
 PASSWORD__nokfssysemoperatorfallback='$1$n7DIVtLG$pMM7daen80p6tL3yHLWTk.' # commissioning <br />
 COMM_DELIVERY_ROOT="/opt/nokiasiemens/fews/deliveries" # commissioning <br />
 COMM_SESSION_ROOT="/opt/nokiasiemens/fews/sessions" # commissioning <br />
 HW_PLATFORM="VMware" # system <br />
 CLUSTERID="FTD11" # system <br />
 TIMEZONE="Europe/Helsinki" # commissioning <br />
 FSVER="FP5CAT" # system <br />
 COMM_IFACE="vmnet1" # commissioning <br />
 COMM_IPMGMT_EXTERNAL_IP_SCRIPT="/root/ipscript_multinode_cat1.sh" # commissioning <br />
 CPU_TYPE="i686" # system <br />
 DEPLOYMENT="create_4nodes_vmware.sh" # commissioning <br />
 COMM_FEWSIP="192.168.101.4/24" # commissioning <br />
 FEWS_ROOT="this is fake variable for makepartition" # commissioning <br />
 COMM_MODE="initial" # commissioning <br />
 COMM_NODE="CLA-0" # commissioning <br />
 COMM_VLAN="" # commissioning <br />
 AUTOCOMM="" # commissioning <br />
 COMM_SESSION_AUTOSTART="" # commissioning <br />
 COMM_SESSION_AUTOSTOP="" # commissioning <br />
</pre>
<p>Changes from the above sample file will be 
Change the value for COMM_FEWSIP variable with an ip in the subnet of vmnet1 configured in the host machine other than .255 <br />
For the other parameters they are almost self explanatory or else commissioning quick guide for VMWare could be referred
</p><p>4. Get the ipscript if you need external connectivity or else the COMM_IPMGMT_EXTERNAL_IP_SCRIPT variable could be commented out
Sample ipscript for multi node is given below
</p>
<pre> #!/bin/bash -x
 echo HPRM33-IPSCRIPT-START-VMWARE-MULTIPLE-NODE
 
 set -e
 
 for node in $(fsiputils listnodes all)&#160;; do
   for iface in eth2 eth3&#160;; do
       fsipnet ethiface del $iface node $node 2&gt; /dev/null || true
   done
 done
 
 # First add addresses for nodes
 fsipaddress dedicated add 10.20.100.161/24 iface eth1 owner /CLA-0
 fsipaddress dedicated add 10.20.100.162/24 iface eth1 owner /CLA-1
 # And then for RGs
 fsipaddress dedicated add 10.20.100.163/24 iface eth1 owner /Directory
 fsipaddress dedicated add 10.20.100.164/24 iface eth1 owner /TargetInfo
 fsipaddress dedicated add 10.20.100.165/24 iface eth1 owner /ClusterDNS
 fsipaddress dedicated add 10.20.100.166/24 iface eth1 owner /ClusterNTP
 #fsipaddress dedicated add 10.102.228.137/24 iface eth1 owner /SNMPMediator
 
 fsiproute add 0.0.0.0/0 via 10.20.100.1 iface eth1 owner /CLA-0
 fsiproute add 0.0.0.0/0 via 10.20.100.1 iface eth1 owner /CLA-1
 fsipnet service add ClusterNTP forwarder 10.20.100.1
 fsipnet service add ClusterDNS forwarder 172.21.220.21
 
 echo HPRM33-IPSCRIPT-STOP-VMWARE-MULTIPLE-NODE
 
 exit 0
</pre>
<p>5. Change the ip address as per the ip addresses assigned by Lab support team for the machine
</p><p>6. Create a session
</p>
<pre> $ fsetupcli --session --create &lt;Session name&gt; fsetup.conf
</pre>
<p>7. When the VMWare server or Host machine is started / re-started  the dhcp will be started on all the configured Virtual networks. <br />So before starting the session kill all the dhcp running if the server was restarted<br />
For example,
</p>
<pre> $ ps -ef |grep dhcp
 root      3317     1  0 14:47&#160;?        00:00:00 /usr/bin/vmnet-dhcpd -  cf /etc/vmware/vmnet1/dhcpd/dhcpd.conf -lf /etc/vmware/vmnet1/dhcpd/dhcpd.leases -pf /var/run/vmnet-dhcpd- vmnet1.pid vmnet1
 root      6844  2870  0 17:04 pts/0    00:00:00 grep dhcp
 [root@VNB15 ~]# kill -9 3317
 [root@VNB15 ~]#
  
</pre>
<p>8. Start the session.
</p>
<pre> $ fsetupcli --session --start &lt;Session name&gt;
</pre>
<p>9. The MAC address for eth0 is configured while running the script create_cluster_vms.sh, but the MAC address for eth1 is generated by VMware and they are always generated as same for the machines in same chassis. 
</p><p><br />To avoid duplicate MAC address we need to change the eth1 MAC address (available for CLA nodes only) as below<br />
Change the value in the file /var/lib/vmware/Virtual\ Machines/CAT1/CLA-0/CLA-0.vmx and /var/lib/vmware/Virtual\ Machines/CAT1/CLA-1/CLA-1.vmx
</p><p>Remove the lines
</p>
<pre> ethernet1.addressType = "generated" 
 ethernet1.generatedAddress = "00:0c:29:e9:a4:80"
 ethernet1.generatedAddressOffset = "10"
</pre>
<p>Add 
</p>
<pre> ethernet1.addressType = "static"
 ethernet1.address = "00:50:56:3f:07:00" 
</pre>
<p>Modify the bytes in the mac address so that its unique. Pattern followed now is that the ID of the host machine, say VNB15, the mac id will be
00:50:56:3f:15:00 for CLA-0 and 00:50:56:3f:15:01 for CLA-1
</p><p>Note1: For the ethernet1 configurations to be visible in the vmx file the nodes should be powered on atleast once. If the node was never powered on after adding the Ethernet2 then we can just add the lines to the vmx file.
</p><p>Note2: The VMware static MAC address range should be always in the below range
00:50:56:00:00:00 - 00:50:56:3F:FF:FF
</p><p>10. Start the VMWare GUI using the command vmware
</p>
<pre> $ vmware &amp;
</pre>
<p>11. Power on the CLA-0 machine. Since the first time commissioning we need not press F12 for network boot. Once the node does the network boot enter kick and enter to start the commissioning
</p><p>12. Once fsetup.sh takes over the commissioning start the CLA-1 machine to network and again enter kick and enter at the network boot.
</p><p>13. Once the commissioning is over stop the session running on the hostmachine FEWS.
</p><p>14. Start the CLA-0 and CLA-1 nodes. Once the Directory RG is up power on the AS nodes
</p><p>15. Once all the nodes are up run the postConfig.py script from the Directory node.
</p><p>16. Once postConfig is over to permit ssh root login to the Cluster modify the file
/etc/ssh/sshd_external_config.
</p><p>Change the parameter PermitRootLogin without-password =&gt; PermitRootLogin yes
Then restart the SSHDaemon
</p>
<pre> $ hascli -rn /CLA-X/FSDirectoryServer/SSHDaemon
</pre>
<p>Where X stands for the node on which Directory RU is Active
Now the cluster is ready to use...
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 26/1000000
Preprocessor generated node count: 32/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1957-0!*!*!!en!*!* and timestamp 20240823044431 -->
</div><div class="printfooter">
Retrieved from "<a href="../indexc6fe.html?title=Nokia_blades_VE_Installation_guide&amp;oldid=7340">http://sugar.fp.nsn-rdnet.net/wiki/index.php?title=Nokia_blades_VE_Installation_guide&amp;oldid=7340</a>"</div>
		<div id='catlinks' class='catlinks catlinks-allhidden'></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="Nokia_blades_VE_Installation_guide.html" primary="1" context="subject" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="../indexea0f.html?title=Talk:Nokia_blades_VE_Installation_guide&amp;action=edit&amp;redlink=1" primary="1" context="talk" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="../index24ed.html?title=Nokia_blades_VE_Installation_guide&amp;action=edit" primary="1" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="../indexe977.html?title=Nokia_blades_VE_Installation_guide&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="User_10.143.81.html" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">10.143.81.182</a></li>
				<li id="pt-anontalk"><a href="User_talk_10.143.81.html" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
				<li id="pt-createaccount"><a href="../indexc46d.html?title=Special:UserLogin&amp;returnto=Nokia+blades+VE+Installation+guide&amp;type=signup">Create account</a></li>
				<li id="pt-anonlogin"><a href="../index931c.html?title=Special:UserLogin&amp;returnto=Nokia+blades+VE+Installation+guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="Main_Page.html" style="background-image: url(../skins/common/images/wiki.png);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-portal"><a href="SugarWiki_Community_portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="SugarWiki_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="POC_(Chengdu).html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help_Contents.html" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="http://sugar.fp.nsn-rdnet.net/wiki/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" title="Search SugarWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Toolbox</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Nokia_blades_VE_Installation_guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Nokia_blades_VE_Installation_guide.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="../index55f9.html?title=Nokia_blades_VE_Installation_guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="../indexc6fe.html?title=Nokia_blades_VE_Installation_guide&amp;oldid=7340" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="../index75d2.html?title=Nokia_blades_VE_Installation_guide&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 8 October 2008, at 17:54.</li>
		<li id="viewcount">This page has been accessed 162 times.</li>
		<li id="privacy"><a href="SugarWiki_Privacy_policy.html" title="SugarWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="SugarWiki_About.html" title="SugarWiki:About">About SugarWiki</a></li>
		<li id="disclaimer"><a href="SugarWiki_General_disclaimer.html" title="SugarWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi"], null, true);
}</script>
<script src="../loadc9d9.html?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<!-- Served in 0.243 secs. --></body>
<!-- Mirrored from sugar.fp.nsn-rdnet.net/wiki/index.php/Nokia_blades_VE_Installation_guide by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 23 Aug 2024 05:05:39 GMT -->
</html>